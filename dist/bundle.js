(()=>{var h={\u044F:["\u0439\u0430","\u0439\u04D9"],\u0435:["\u0439\u044B","\u0439\u044D"],\u044E:["\u0439\u0443","\u0439\u04AF"],\u042F:["\u0419\u0430","\u0419\u04D9"],\u0415:["\u0419\u044B","\u0419\u044D"],\u042E:["\u0419\u0443","\u0419\u04AF"]},A={\u0435:"\u044D",\u0415:"\u042D"},r={\u0410:"A",\u0430:"a",\u04D8:"\xC4",\u04D9:"\xE4",\u0411:"B",\u0431:"b",\u0412:"V",\u0432:"v",\u0414:"D",\u0434:"d",\u0416:"J",\u0436:"j",\u0496:"C",\u0497:"c",\u0417:"Z",\u0437:"z",\u0418:"\u0130",\u0438:"i",\u0419:"Y",\u0439:"y",\u041B:"L",\u043B:"l",\u041C:"M",\u043C:"m",\u041D:"N",\u043D:"n",\u04A2:"\xD1",\u04A3:"\xF1",\u041E:"O",\u043E:"o",\u04E8:"\xD6",\u04E9:"\xF6",\u041F:"P",\u043F:"p",\u0420:"R",\u0440:"r",\u0421:"S",\u0441:"s",\u0422:"T",\u0442:"t",\u0423:"U",\u0443:"u",\u04AE:"\xDC",\u04AF:"\xFC",\u0424:"F",\u0444:"f",\u0425:"X",\u0445:"x",\u04BA:"H",\u04BB:"h",\u0426:"S",\u0446:"s",\u0427:"\xC7",\u0447:"\xE7",\u0428:"\u015E",\u0448:"\u015F",\u0492:"\u011E",\u0493:"\u011F",\u0429:"\u015E\xE7",\u0449:"\u015F\xE7",\u042B:"I",\u044B:"\u0131",\u042D:"E",\u044D:"e",\u042F:"\xC2",\u044F:"\xE2"},_={\u043A:["q","k"],\u0433:["\u011F","g"],\u041A:["Q","K"],\u0413:["\u011E","G"]},g=` ,.
`,f="\u0430\u0443\u043E\u044B\u0410\u0423\u041E\u042B",T="\u04D9\u04AF\u04E9\u044D\u04D8\u04AE\u04E8\u042D\u0438\u0418",x="\u044F\u044E\u0435\u042F\u042E\u0415",k=f+T+x,N="\u0431\u0432\u0433\u0493\u0434\u0436\u0497\u0437\u0439\u043A\u043B\u043C\u043D\u04A3\u043F\u0440\u0441\u0442\u0444\u0445\u04BB\u0446\u0447\u0448\u0449\u0411\u0412\u0413\u0492\u0414\u0416\u0496\u0417\u0419\u041A\u041B\u041C\u041D\u04A2\u041F\u0420\u0421\u0422\u0424\u0425\u04BA\u0426\u0427\u0428\u0429",m="\u044A\u042A",a="\u044C\u042C",C=m+a,D="\u0443\u04AF\u0423\u04AE",I=0,B=1,O=2;function L(t,e){return f.includes(t[e])?I:T.includes(t[e])||a.includes(t[e])?B:O}function S(t,e){let l=e;for(;l<t.length&&!g.includes(t[l]);){let n=L(t,l);if(n!=O)return n;l++}for(;e>=0&&!g.includes(t[e]);){let n=L(t,e);if(n!=O)return n;e--}return I}function E(t,e){return e==0||g.includes(t[e-1])}function V(t){let e="";for(let n=0;n<t.length;n++)!E(t,n)&&N.includes(t[n-1])&&t[n]in A?e+=A[t[n]]:e+=t[n];let l="";for(let n=0;n<e.length;n++){let o=E(e,n),d=!o&&N.includes(e[n-1]);(o||!d)&&e[n]in h?l+=h[e[n]][S(e,n)]:l+=e[n]}return l}var b="\u02BC";function F(t,e){return E(t,e)||e==t.length-1?!1:!!(m.includes(t[e])&&!(t[e-1]in _)&&t[e+1]!="\u0419"&&t[e+1]!="\u0439"||(t[e]==="\u044D"||t[e]==="\u042D")&&k.includes(t[e-1]))}function M(t,e){return e!=t.length-1&&k.includes(t[e])&&D.includes(t[e+1])}function v(t,e){let l=r[t[e]];return D.substring(2).includes(t[e+1])?l+="W":l+="w",l}var H="\u04D9\u04AF\u044D\u04D8\u04AE\u042D";function K(t,e){return e>=t.length-3||t[e]!="\u0438"&&t[e]!="\u0418"||t[e+1]!="\u0419"&&t[e+1]!="\u0439"?!1:!!H.includes(t[e+2])}function z(t,e){return r[t[e]]+r[t[e+2]]}function U(t,e){let l=e!=t.length-1&&m.includes(t[e+1])?I:S(t,e);return _[t[e]][l]}var W={\u044B:"\u0438",\u042B:"\u0418"};function q(t,e){return!(t[e]in W)||e<t.length-4||e==0||t[e+1]!="\u0439"&&t[e+1]!="\u0419"?!1:a.includes(t[e+3])}function P(t,e){return e<t.length-3||e==0?!1:a.includes(t[e+2])}function R(t,e){return S(t,e+1)==B}function w(t,e,l,n,o,d){let u=V(t);r.\u04D9=e?"\u0259":"\xE4",r.\u04D8=e?"\u018F":"\xC4",r.\u044F=l?"\xE2":r.\u04D9,r.\u042F=l?"\xC2":r.\u04D8;let c=!1,s="";for(let i=0;i<u.length;i++){if(c){c=!1;continue}if(F(u,i)){s+=b;continue}if(!C.includes(u[i])){if(M(u,i)){s+=v(u,i),c=!0;continue}if(n&&K(u,i)){s+=z(u,i),c=!0;continue}if(u[i]in _){s+=U(u,i);continue}if(f.includes(u[i])&&i!=0&&u[i]in _){q(u,i)||o&&R(u,i)?(s+=W[u[i]],c=!0):(P(u,i)||o&&R(u,i))&&(s+=T[f.indexOf(u[i])]);continue}if(u[i]in r){s+=r[u[i]];continue}s+=u[i]}}return s}document.getElementById("rulesToggle").addEventListener("click",function(){let t=document.getElementById("rulesContent"),e=this.querySelector(".arrow");t.classList.toggle("show"),e.classList.toggle("rotated")});document.getElementById("transliterateBtn").addEventListener("click",function(){let t=n=>document.getElementById(n).checked,e=document.getElementById("inputText").value,l=w(e,t("optJanalifA"),t("optTraditionalYa"),t("optZamanalifIa"),t("optInitalGaFix"),t("optIotatedUppercaseFix"));document.getElementById("outputText").value=l});})();
